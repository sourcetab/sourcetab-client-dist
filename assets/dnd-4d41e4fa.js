import{r as a,R as N,a as Me,u as ot,j as V,g as un,W as kt,B as et}from"./index-f5f542c2.js";function dn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return a.useMemo(()=>r=>{t.forEach(o=>o(r))},t)}const _e=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function pe(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object window]"}function st(e){return"nodeType"in e}function U(e){var t,n;return e?pe(e)?e:st(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function it(e){const{Document:t}=U(e);return e instanceof t}function be(e){return pe(e)?!1:e instanceof U(e).HTMLElement}function fn(e){return e instanceof U(e).SVGElement}function we(e){return e?pe(e)?e.document:st(e)?it(e)?e:be(e)?e.ownerDocument:document:document:document}const ne=_e?a.useLayoutEffect:a.useEffect;function hn(e){const t=a.useRef(e);return ne(()=>{t.current=e}),a.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t.current==null?void 0:t.current(...r)},[])}function gn(){const e=a.useRef(null),t=a.useCallback((r,o)=>{e.current=setInterval(r,o)},[]),n=a.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function We(e,t){t===void 0&&(t=[e]);const n=a.useRef(e);return ne(()=>{n.current!==e&&(n.current=e)},t),n}function me(e,t){const n=a.useRef();return a.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function ct(e){const t=hn(e),n=a.useRef(null),r=a.useCallback(o=>{o!==n.current&&(t==null||t(o,n.current)),n.current=o},[]);return[n,r]}let Ge={};function Ne(e,t){return a.useMemo(()=>{if(t)return t;const n=Ge[e]==null?0:Ge[e]+1;return Ge[e]=n,e+"-"+n},[e,t])}function $t(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.reduce((s,l)=>{const i=Object.entries(l);for(const[c,u]of i){const d=s[c];d!=null&&(s[c]=d+e*u)}return s},{...t})}}const Ae=$t(1),Bt=$t(-1);function vn(e){return"clientX"in e&&"clientY"in e}function lt(e){if(!e)return!1;const{KeyboardEvent:t}=U(e.target);return t&&e instanceof t}function pn(e){if(!e)return!1;const{TouchEvent:t}=U(e.target);return t&&e instanceof t}function Xe(e){if(pn(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return vn(e)?{x:e.clientX,y:e.clientY}:null}const ue=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[ue.Translate.toString(e),ue.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),bn={display:"none"};function wn(e){let{id:t,value:n}=e;return N.createElement("div",{id:t,style:bn},n)}const mn={position:"fixed",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};function yn(e){let{id:t,announcement:n}=e;return N.createElement("div",{id:t,style:mn,role:"status","aria-live":"assertive","aria-atomic":!0},n)}function xn(){const[e,t]=a.useState("");return{announce:a.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const Dn={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Rn={onDragStart(e){return`Picked up draggable item ${e}.`},onDragOver(e,t){return t?`Draggable item ${e} was moved over droppable area ${t}.`:`Draggable item ${e} is no longer over a droppable area.`},onDragEnd(e,t){return t?`Draggable item ${e} was dropped over droppable area ${t}`:`Draggable item ${e} was dropped.`},onDragCancel(e){return`Dragging was cancelled. Draggable item ${e} was dropped.`}};var R;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(R||(R={}));function Ye(...e){}class Te extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(({disabled:t})=>!t)}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const Cn={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:{},droppableRects:new Map,droppableContainers:new Te,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Ye},scrollableAncestors:[],scrollableAncestorRects:[],measureDroppableContainers:Ye,windowRect:null,measuringScheduled:!1},Pt={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Ye,draggableNodes:{},over:null,measureDroppableContainers:Ye},He=a.createContext(Pt),Ft=a.createContext(Cn);function Sn(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:{},translate:{x:0,y:0}},droppable:{containers:new Te}}}function En(e,t){switch(t.type){case R.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case R.DragMove:return e.draggable.active?{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}}:e;case R.DragEnd:case R.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case R.RegisterDroppable:{const{element:n}=t,{id:r}=n,o=new Te(e.droppable.containers);return o.set(r,n),{...e,droppable:{...e.droppable,containers:o}}}case R.SetDroppableDisabled:{const{id:n,key:r,disabled:o}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const l=new Te(e.droppable.containers);return l.set(n,{...s,disabled:o}),{...e,droppable:{...e.droppable,containers:l}}}case R.UnregisterDroppable:{const{id:n,key:r}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const s=new Te(e.droppable.containers);return s.delete(n),{...e,droppable:{...e.droppable,containers:s}}}default:return e}}const jt=a.createContext({type:null,event:null});function Mn({onDragStart:e,onDragMove:t,onDragOver:n,onDragEnd:r,onDragCancel:o}){const s=a.useContext(jt),l=a.useRef(s);a.useEffect(()=>{if(s!==l.current){const{type:i,event:c}=s;switch(i){case R.DragStart:e==null||e(c);break;case R.DragMove:t==null||t(c);break;case R.DragOver:n==null||n(c);break;case R.DragCancel:o==null||o(c);break;case R.DragEnd:r==null||r(c);break}l.current=s}},[s,e,t,n,r,o])}function Tn({announcements:e=Rn,hiddenTextDescribedById:t,screenReaderInstructions:n}){const{announce:r,announcement:o}=xn(),s=Ne("DndLiveRegion"),[l,i]=a.useState(!1);return a.useEffect(()=>{i(!0)},[]),Mn(a.useMemo(()=>({onDragStart({active:c}){r(e.onDragStart(c.id))},onDragMove({active:c,over:u}){e.onDragMove&&r(e.onDragMove(c.id,u==null?void 0:u.id))},onDragOver({active:c,over:u}){r(e.onDragOver(c.id,u==null?void 0:u.id))},onDragEnd({active:c,over:u}){r(e.onDragEnd(c.id,u==null?void 0:u.id))},onDragCancel({active:c}){r(e.onDragCancel(c.id))}}),[r,e])),l?Me.createPortal(N.createElement(N.Fragment,null,N.createElement(wn,{id:t,value:n.draggable}),N.createElement(yn,{id:s,announcement:o})),document.body):null}const Q=Object.freeze({x:0,y:0});function In(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function On(e,t){const n=Xe(e);if(!n)return"0 0";const r={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return`${r.x}% ${r.y}%`}function An({data:{value:e}},{data:{value:t}}){return e-t}function Nn({data:{value:e}},{data:{value:t}}){return t-e}function Mt({left:e,top:t,height:n,width:r}){return[{x:e,y:t},{x:e+r,y:t},{x:e,y:t+n},{x:e+r,y:t+n}]}function zt(e,t){if(!e||e.length===0)return null;const[n]=e;return t?n[t]:n}const Wt=({collisionRect:e,droppableContainers:t})=>{const n=Mt(e),r=[];for(const o of t){const{id:s,rect:{current:l}}=o;if(l){const i=Mt(l),c=n.reduce((d,f,g)=>d+In(i[g],f),0),u=Number((c/4).toFixed(4));r.push({id:s,data:{droppableContainer:o,value:u}})}}return r.sort(An)};function Ln(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),o=Math.min(t.left+t.width,e.left+e.width),s=Math.min(t.top+t.height,e.top+e.height),l=o-r,i=s-n;if(r<o&&n<s){const c=t.width*t.height,u=e.width*e.height,d=l*i,f=d/(c+u-d);return Number(f.toFixed(4))}return 0}const kn=({collisionRect:e,droppableContainers:t})=>{const n=[];for(const r of t){const{id:o,rect:{current:s}}=r;if(s){const l=Ln(s,e);l>0&&n.push({id:o,data:{droppableContainer:r,value:l}})}}return n.sort(Nn)};function $n(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function Bn(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Q}function Pn(e){return function(n,...r){return r.reduce((o,s)=>({...o,top:o.top+e*s.y,bottom:o.bottom+e*s.y,left:o.left+e*s.x,right:o.right+e*s.x}),{...n})}}const Fn=Pn(1);function jn(e,t,n){let r,o,s,l,i;if(t.startsWith("matrix3d("))r=t.slice(9,-1).split(/, /),o=+r[0],s=+r[5],l=+r[12],i=+r[13];else if(t.startsWith("matrix("))r=t.slice(7,-1).split(/, /),o=+r[0],s=+r[3],l=+r[4],i=+r[5];else return e;const c=e.left-l-(1-o)*parseFloat(n),u=e.top-i-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),d=o?e.width/o:e.width,f=s?e.height/s:e.height;return{width:d,height:f,top:u,right:c+d,bottom:u+f,left:c}}const zn={ignoreTransform:!1};function at(e,t=zn){let n=e.getBoundingClientRect();if(t.ignoreTransform){const{getComputedStyle:u}=U(e),{transform:d,transformOrigin:f}=u(e);d&&(n=jn(n,d,f))}const{top:r,left:o,width:s,height:l,bottom:i,right:c}=n;return{top:r,left:o,width:s,height:l,bottom:i,right:c}}function ye(e){return at(e,{ignoreTransform:!0})}function Wn(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function Xn(e,t=U(e).getComputedStyle(e)){return t.position==="fixed"}function Yn(e,t=U(e).getComputedStyle(e)){const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].find(o=>{const s=t[o];return typeof s=="string"?n.test(s):!1})!=null}function ut(e){const t=[];function n(r){if(!r)return t;if(it(r)&&r.scrollingElement!=null&&!t.includes(r.scrollingElement))return t.push(r.scrollingElement),t;if(!be(r)||fn(r)||t.includes(r))return t;const{getComputedStyle:o}=U(r),s=o(r);return r!==e&&Yn(r,s)&&t.push(r),Xn(r,s)?t:n(r.parentNode)}return e?n(e):t}function Je(e){return!_e||!e?null:pe(e)?e:st(e)?it(e)||e===we(e).scrollingElement?window:be(e)?e:null:null}function Xt(e){return pe(e)?e.scrollX:e.scrollLeft}function Yt(e){return pe(e)?e.scrollY:e.scrollTop}function tt(e){return{x:Xt(e),y:Yt(e)}}var ge;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(ge||(ge={}));function Ut(e){const t={x:0,y:0},n={x:e.scrollWidth-e.clientWidth,y:e.scrollHeight-e.clientHeight},r=e.scrollTop<=t.y,o=e.scrollLeft<=t.x,s=e.scrollTop>=n.y,l=e.scrollLeft>=n.x;return{isTop:r,isLeft:o,isBottom:s,isRight:l,maxScroll:n,minScroll:t}}function Un(e){return!_e||!e?!1:e===document.scrollingElement}const Kn={x:.2,y:.2};function _n(e,t,{top:n,left:r,right:o,bottom:s},l=10,i=Kn){const{clientHeight:c,clientWidth:u}=e,d=Un(e)?{top:0,left:0,right:u,bottom:c,width:u,height:c}:t,{isTop:f,isBottom:g,isLeft:v,isRight:p}=Ut(e),b={x:0,y:0},w={x:0,y:0},h={height:d.height*i.y,width:d.width*i.x};return!f&&n<=d.top+h.height?(b.y=ge.Backward,w.y=l*Math.abs((d.top+h.height-n)/h.height)):!g&&s>=d.bottom-h.height&&(b.y=ge.Forward,w.y=l*Math.abs((d.bottom-h.height-s)/h.height)),!p&&o>=d.right-h.width?(b.x=ge.Forward,w.x=l*Math.abs((d.right-h.width-o)/h.width)):!v&&r<=d.left+h.width&&(b.x=ge.Backward,w.x=l*Math.abs((d.left+h.width-r)/h.width)),{direction:b,speed:w}}function Hn(e){if(e===document.scrollingElement){const{innerWidth:s,innerHeight:l}=window;return{top:0,left:0,right:s,bottom:l,width:s,height:l}}const{top:t,left:n,right:r,bottom:o}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:o,width:e.clientWidth,height:e.clientHeight}}function Kt(e){return e.reduce((t,n)=>Ae(t,tt(n)),Q)}function qn(e){return e.reduce((t,n)=>t+Xt(n),0)}function Vn(e){return e.reduce((t,n)=>t+Yt(n),0)}const Gn=[["x",["left","right"],qn],["y",["top","bottom"],Vn]];class dt{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=ut(n),o=Kt(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[s,l,i]of Gn)for(const c of l)Object.defineProperty(this,c,{get:()=>{const u=i(r),d=o[s]-u;return this.rect[c]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}var Ie;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Ie||(Ie={}));var Ue;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Ue||(Ue={}));function Jn({acceleration:e,activator:t=Ie.Pointer,canScroll:n,draggingRect:r,enabled:o,interval:s=5,order:l=Ue.TreeOrder,pointerCoordinates:i,scrollableAncestors:c,scrollableAncestorRects:u,threshold:d}){const[f,g]=gn(),v=a.useRef({x:1,y:1}),p=a.useMemo(()=>{switch(t){case Ie.Pointer:return i?{top:i.y,bottom:i.y,left:i.x,right:i.x}:null;case Ie.DraggableRect:return r}return null},[t,r,i]),b=a.useRef(Q),w=a.useRef(null),h=a.useCallback(()=>{const m=w.current;if(!m)return;const x=v.current.x*b.current.x,S=v.current.y*b.current.y;m.scrollBy(x,S)},[]),C=a.useMemo(()=>l===Ue.TreeOrder?[...c].reverse():c,[l,c]);a.useEffect(()=>{if(!o||!c.length||!p){g();return}for(const m of C){if((n==null?void 0:n(m))===!1)continue;const x=c.indexOf(m),S=u[x];if(!S)continue;const{direction:D,speed:M}=_n(m,S,p,e,d);if(M.x>0||M.y>0){g(),w.current=m,f(h,s),v.current=M,b.current=D;return}}v.current={x:0,y:0},b.current={x:0,y:0},g()},[e,h,n,g,o,s,JSON.stringify(p),f,c,C,u,JSON.stringify(d)])}function Qn(e,t){const n=t!==null?e[t]:void 0,r=n?n.node.current:null;return me(o=>{var s;return t===null?null:(s=r??o)!=null?s:null},[r,t])}function Zn(e,t){return a.useMemo(()=>e.reduce((n,r)=>{const{sensor:o}=r,s=o.activators.map(l=>({eventName:l.eventName,handler:t(l.handler,r)}));return[...n,...s]},[]),[e,t])}var ve;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(ve||(ve={}));var nt;(function(e){e.Optimized="optimized"})(nt||(nt={}));const Tt=new Map,er={measure:ye,strategy:ve.WhileDragging,frequency:nt.Optimized};function tr(e,{dragging:t,dependencies:n,config:r}){const[o,s]=a.useState(null),l=o!=null,{frequency:i,measure:c,strategy:u}={...er,...r},d=a.useRef(e),f=a.useCallback((w=[])=>s(h=>h?h.concat(w):w),[]),g=a.useRef(null),v=b(),p=me(w=>{if(v&&!t)return Tt;const h=o;if(!w||w===Tt||d.current!==e||h!=null){const C=new Map;for(let m of e){if(!m)continue;if(h&&h.length>0&&!h.includes(m.id)&&m.rect.current){C.set(m.id,m.rect.current);continue}const x=m.node.current,S=x?new dt(c(x),x):null;m.rect.current=S,S&&C.set(m.id,S)}return C}return w},[e,o,t,v,c]);return a.useEffect(()=>{d.current=e},[e]),a.useEffect(()=>{v||requestAnimationFrame(()=>f())},[t,v]),a.useEffect(()=>{l&&s(null)},[l]),a.useEffect(()=>{v||typeof i!="number"||g.current!==null||(g.current=setTimeout(()=>{f(),g.current=null},i))},[i,v,f,...n]),{droppableRects:p,measureDroppableContainers:f,measuringScheduled:l};function b(){switch(u){case ve.Always:return!1;case ve.BeforeDragging:return t;default:return!t}}}function _t({onResize:e,disabled:t}){const n=a.useMemo(()=>{if(t||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:r}=window;return new r(e)},[t,e]);return a.useEffect(()=>()=>n==null?void 0:n.disconnect(),[n]),n}function nr(e){const[t,n]=a.useState(null),r=a.useRef(e),o=a.useCallback(s=>{const l=Je(s.target);l&&n(i=>i?(i.set(l,tt(l)),new Map(i)):null)},[]);return a.useEffect(()=>{const s=r.current;if(e!==s){l(s);const i=e.map(c=>{const u=Je(c);return u?(u.addEventListener("scroll",o,{passive:!0}),[u,tt(u)]):null}).filter(c=>c!=null);n(i.length?new Map(i):null),r.current=e}return()=>{l(e),l(s)};function l(i){i.forEach(c=>{const u=Je(c);u==null||u.removeEventListener("scroll",o)})}},[o,e]),a.useMemo(()=>e.length?t?Array.from(t.values()).reduce((s,l)=>Ae(s,l),Q):Kt(e):Q,[e,t])}const rr=[];function or(e){const t=a.useRef(e),n=me(r=>e?r&&e&&t.current&&e.parentNode===t.current.parentNode?r:ut(e):rr,[e]);return a.useEffect(()=>{t.current=e},[e]),n}function sr(e){a.useEffect(()=>{if(!_e)return;const t=e.map(({sensor:n})=>n.setup==null?void 0:n.setup());return()=>{for(const n of t)n==null||n()}},e.map(({sensor:t})=>t))}function ir(e,t){return a.useMemo(()=>e.reduce((n,{eventName:r,handler:o})=>(n[r]=s=>{o(s,t)},n),{}),[e,t])}const cr=ar(ye),lr=ur(ye);function Ht(e,t,n){const r=a.useRef(e);return me(o=>e?n||!o&&e||e!==r.current?be(e)&&e.parentNode==null?null:new dt(t(e),e):o??null:null,[e,n,t])}function ar(e){return(t,n)=>Ht(t,e,n)}function ur(e){const t=[];return function(r,o){const s=a.useRef(r);return me(l=>r.length?o||!l&&r.length||r!==s.current?r.map(i=>new dt(e(i),i)):l??t:t,[r,o])}}function dr(e){return a.useMemo(()=>e?Wn(e):null,[e])}function qt(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return be(t)?t:e}function fr({measure:e=at}){const[t,n]=a.useState(null),r=a.useCallback(c=>{for(const{target:u}of c)if(be(u)){n(d=>{const f=e(u);return d?{...d,width:f.width,height:f.height}:f});break}},[e]),o=_t({onResize:r}),s=a.useCallback(c=>{const u=qt(c);o==null||o.disconnect(),u&&(o==null||o.observe(u)),n(u?e(u):null)},[e,o]),[l,i]=ct(s);return a.useMemo(()=>({nodeRef:l,rect:t,setRef:i}),[t,l,i])}function It(e,t){return a.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function hr(...e){return a.useMemo(()=>[...e].filter(t=>t!=null),[...e])}class Oe{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var o;(o=this.target)==null||o.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function gr(e){const{EventTarget:t}=U(e);return e instanceof t?e:we(e)}function Qe(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var Y;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Y||(Y={}));function Ot(e){e.preventDefault()}function vr(e){e.stopPropagation()}var y;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter"})(y||(y={}));const Vt={start:[y.Space,y.Enter],cancel:[y.Esc],end:[y.Space,y.Enter]},pr=(e,{currentCoordinates:t})=>{switch(e.code){case y.Right:return{...t,x:t.x+25};case y.Left:return{...t,x:t.x-25};case y.Down:return{...t,y:t.y+25};case y.Up:return{...t,y:t.y-25}}};class ft{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.coordinates=Q,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Oe(we(n)),this.windowListeners=new Oe(U(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Y.Resize,this.handleCancel),this.windowListeners.add(Y.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Y.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props;if(!t.node.current)throw new Error("Active draggable node is undefined");const r=ye(t.node.current),o={x:r.left,y:r.top};this.coordinates=o,n(o)}handleKeyDown(t){if(lt(t)){const{coordinates:n}=this,{active:r,context:o,options:s}=this.props,{keyboardCodes:l=Vt,coordinateGetter:i=pr,scrollBehavior:c="smooth"}=s,{code:u}=t;if(l.end.includes(u)){this.handleEnd(t);return}if(l.cancel.includes(u)){this.handleCancel(t);return}const d=i(t,{active:r,context:o.current,currentCoordinates:n});if(d){const f={x:0,y:0},{scrollableAncestors:g}=o.current;for(const v of g){const p=t.code,b=Bt(d,n),{isTop:w,isRight:h,isLeft:C,isBottom:m,maxScroll:x,minScroll:S}=Ut(v),D=Hn(v),M={x:Math.min(p===y.Right?D.right-D.width/2:D.right,Math.max(p===y.Right?D.left:D.left+D.width/2,d.x)),y:Math.min(p===y.Down?D.bottom-D.height/2:D.bottom,Math.max(p===y.Down?D.top:D.top+D.height/2,d.y))},B=p===y.Right&&!h||p===y.Left&&!C,E=p===y.Down&&!m||p===y.Up&&!w;if(B&&M.x!==d.x){if(p===y.Right&&v.scrollLeft+b.x<=x.x||p===y.Left&&v.scrollLeft+b.x>=S.x){v.scrollBy({left:b.x,behavior:c});return}f.x=p===y.Right?v.scrollLeft-x.x:v.scrollLeft-S.x,v.scrollBy({left:-f.x,behavior:c});break}else if(E&&M.y!==d.y){if(p===y.Down&&v.scrollTop+b.y<=x.y||p===y.Up&&v.scrollTop+b.y>=S.y){v.scrollBy({top:b.y,behavior:c});return}f.y=p===y.Down?v.scrollTop-x.y:v.scrollTop-S.y,v.scrollBy({top:-f.y,behavior:c});break}}this.handleMove(t,Ae(d,f))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n),this.coordinates=n}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}ft.activators=[{eventName:"onKeyDown",handler:(e,{keyboardCodes:t=Vt,onActivation:n})=>{const{code:r}=e.nativeEvent;return t.start.includes(r)?(e.preventDefault(),n==null||n({event:e.nativeEvent}),!0):!1}}];function At(e){return!!(e&&"distance"in e)}function Nt(e){return!!(e&&"delay"in e)}class ht{constructor(t,n,r=gr(t.event.target)){var o;this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:s}=t,{target:l}=s;this.props=t,this.events=n,this.document=we(l),this.documentListeners=new Oe(this.document),this.listeners=new Oe(r),this.windowListeners=new Oe(U(l)),this.initialCoordinates=(o=Xe(s))!=null?o:Q,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),this.windowListeners.add(Y.Resize,this.handleCancel),this.windowListeners.add(Y.DragStart,Ot),this.windowListeners.add(Y.VisibilityChange,this.handleCancel),this.windowListeners.add(Y.ContextMenu,Ot),this.documentListeners.add(Y.Keydown,this.handleKeydown),n){if(At(n))return;if(Nt(n)){this.timeoutId=setTimeout(this.handleStart,n.delay);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(Y.Click,vr,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Y.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:o,props:s}=this,{onMove:l,options:{activationConstraint:i}}=s;if(!o)return;const c=(n=Xe(t))!=null?n:Q,u=Bt(o,c);if(!r&&i){if(Nt(i))return Qe(u,i.tolerance)?this.handleCancel():void 0;if(At(i))return i.tolerance!=null&&Qe(u,i.tolerance)?this.handleCancel():Qe(u,i.distance)?this.handleStart():void 0}t.cancelable&&t.preventDefault(),l(c)}handleEnd(){const{onEnd:t}=this.props;this.detach(),t()}handleCancel(){const{onCancel:t}=this.props;this.detach(),t()}handleKeydown(t){t.code===y.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const br={move:{name:"pointermove"},end:{name:"pointerup"}};class gt extends ht{constructor(t){const{event:n}=t,r=we(n.target);super(t,br,r)}}gt.activators=[{eventName:"onPointerDown",handler:({nativeEvent:e},{onActivation:t})=>!e.isPrimary||e.button!==0?!1:(t==null||t({event:e}),!0)}];const wr={move:{name:"mousemove"},end:{name:"mouseup"}};var rt;(function(e){e[e.RightClick=2]="RightClick"})(rt||(rt={}));class mr extends ht{constructor(t){super(t,wr,we(t.event.target))}}mr.activators=[{eventName:"onMouseDown",handler:({nativeEvent:e},{onActivation:t})=>e.button===rt.RightClick?!1:(t==null||t({event:e}),!0)}];const Ze={move:{name:"touchmove"},end:{name:"touchend"}};class yr extends ht{constructor(t){super(t,Ze)}static setup(){return window.addEventListener(Ze.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Ze.move.name,t)};function t(){}}}yr.activators=[{eventName:"onTouchStart",handler:({nativeEvent:e},{onActivation:t})=>{const{touches:n}=e;return n.length>1?!1:(t==null||t({event:e}),!0)}}];function Gt(e,{transform:t,...n}){return e!=null&&e.length?e.reduce((r,o)=>o({transform:r,...n}),t):t}const xr=[{sensor:gt,options:{}},{sensor:ft,options:{}}],Dr={current:{}},Ke=a.createContext({...Q,scaleX:1,scaleY:1}),Rr=a.memo(function({id:t,autoScroll:n=!0,announcements:r,children:o,sensors:s=xr,collisionDetection:l=kn,measuring:i,modifiers:c,screenReaderInstructions:u=Dn,...d}){var f,g,v,p,b,w,h;const C=a.useReducer(En,void 0,Sn),[m,x]=C,[S,D]=a.useState(()=>({type:null,event:null})),[M,B]=a.useState(!1),{draggable:{active:E,nodes:T,translate:$},droppable:{containers:I}}=m,re=E?T[E]:null,G=a.useRef({initial:null,translated:null}),k=a.useMemo(()=>{var A;return E!=null?{id:E,data:(A=re==null?void 0:re.data)!=null?A:Dr,rect:G}:null},[E,re]),F=a.useRef(null),[Z,P]=a.useState(null),[j,K]=a.useState(null),oe=We(d,Object.values(d)),Le=Ne("DndDescribedBy",t),ke=a.useMemo(()=>I.getEnabled(),[I]),{droppableRects:_,measureDroppableContainers:ee,measuringScheduled:O}=tr(ke,{dragging:M,dependencies:[$.x,$.y],config:i==null?void 0:i.droppable}),H=Qn(T,E),xe=j?Xe(j):null,L=Ht(H,(f=i==null||(g=i.draggable)==null?void 0:g.measure)!=null?f:ye),De=cr(H?H.parentElement:null),le=a.useRef({active:null,activeNode:H,collisionRect:null,collisions:null,droppableRects:_,draggableNodes:T,draggingNode:null,draggingNodeRect:null,droppableContainers:I,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),bt=I.getNodeFor((v=le.current.over)==null?void 0:v.id),Re=fr({measure:i==null||(p=i.dragOverlay)==null?void 0:p.measure}),Ce=(b=Re.nodeRef.current)!=null?b:H,ae=(w=Re.rect)!=null?w:L,$e=a.useRef(null),nn=$e.current,wt=ae===L?Bn(L,nn):Q,qe=dr(Ce?Ce.ownerDocument.defaultView:null),se=or(E?bt??Ce:null),Be=lr(se),Ve=Gt(c,{transform:{x:$.x-wt.x,y:$.y-wt.y,scaleX:1,scaleY:1},activatorEvent:j,active:k,activeNodeRect:L,containerNodeRect:De,draggingNodeRect:ae,over:le.current.over,overlayNodeRect:Re.rect,scrollableAncestors:se,scrollableAncestorRects:Be,windowRect:qe}),mt=xe?Ae(xe,$):null,rn=nr(se),de=Ae(Ve,rn),fe=ae?Fn(ae,Ve):null,Se=k&&fe?l({active:k,collisionRect:fe,droppableContainers:ke,pointerCoordinates:mt}):null,yt=zt(Se,"id"),[ie,xt]=a.useState(null),on=$n(Ve,(h=ie==null?void 0:ie.rect)!=null?h:null,L),Dt=a.useCallback((A,{sensor:z,options:W})=>{if(!F.current)return;const J=T[F.current];if(!J)return;const q=new z({active:F.current,activeNode:J,event:A.nativeEvent,options:W,context:le,onStart(X){const ce=F.current;if(!ce)return;const Ee=T[ce];if(!Ee)return;const{onDragStart:Pe}=oe.current,Fe={active:{id:ce,data:Ee.data,rect:G}};Me.unstable_batchedUpdates(()=>{x({type:R.DragStart,initialCoordinates:X,active:ce}),D({type:R.DragStart,event:Fe})}),Pe==null||Pe(Fe)},onMove(X){x({type:R.DragMove,coordinates:X})},onEnd:te(R.DragEnd),onCancel:te(R.DragCancel)});Me.unstable_batchedUpdates(()=>{P(q),K(A.nativeEvent)});function te(X){return async function(){const{active:Ee,collisions:Pe,over:Fe,scrollAdjustedTranslate:Ct}=le.current;let he=null;if(Ee&&Ct){const{cancelDrop:je}=oe.current;he={active:Ee,collisions:Pe,delta:Ct,over:Fe},X===R.DragEnd&&typeof je=="function"&&await Promise.resolve(je(he))&&(X=R.DragCancel)}F.current=null,Me.unstable_batchedUpdates(()=>{if(x({type:X}),xt(null),B(!1),P(null),K(null),he&&D({type:X,event:he}),he){const{onDragCancel:je,onDragEnd:St}=oe.current,Et=X===R.DragEnd?St:je;Et==null||Et(he)}})}}},[T]),sn=a.useCallback((A,z)=>(W,J)=>{const q=W.nativeEvent;F.current!==null||q.dndKit||q.defaultPrevented||A(W,z.options)===!0&&(q.dndKit={capturedBy:z.sensor},F.current=J,Dt(W,z))},[Dt]),Rt=Zn(s,sn);sr(s),a.useEffect(()=>{E!=null&&B(!0)},[E]),a.useEffect(()=>{k||($e.current=null),k&&L&&!$e.current&&($e.current=L)},[L,k]),a.useEffect(()=>{const{onDragMove:A}=oe.current,{active:z,collisions:W,over:J}=le.current;if(!z)return;const q={active:z,collisions:W,delta:{x:de.x,y:de.y},over:J};D({type:R.DragMove,event:q}),A==null||A(q)},[de.x,de.y]),a.useEffect(()=>{const{active:A,collisions:z,droppableContainers:W,scrollAdjustedTranslate:J}=le.current;if(!A||!F.current||!J)return;const{onDragOver:q}=oe.current,te=W.get(yt),X=te&&te.rect.current?{id:te.id,rect:te.rect.current,data:te.data,disabled:te.disabled}:null,ce={active:A,collisions:z,delta:{x:J.x,y:J.y},over:X};Me.unstable_batchedUpdates(()=>{xt(X),D({type:R.DragOver,event:ce}),q==null||q(ce)})},[yt]),ne(()=>{le.current={active:k,activeNode:H,collisionRect:fe,collisions:Se,droppableRects:_,draggableNodes:T,draggingNode:Ce,draggingNodeRect:ae,droppableContainers:I,over:ie,scrollableAncestors:se,scrollAdjustedTranslate:de},G.current={initial:ae,translated:fe}},[k,H,Se,fe,T,Ce,ae,_,I,ie,se,de]),Jn({...an(),draggingRect:fe,pointerCoordinates:mt,scrollableAncestors:se,scrollableAncestorRects:Be});const cn=a.useMemo(()=>({active:k,activeNode:H,activeNodeRect:L,activatorEvent:j,collisions:Se,containerNodeRect:De,dragOverlay:Re,draggableNodes:T,droppableContainers:I,droppableRects:_,over:ie,measureDroppableContainers:ee,scrollableAncestors:se,scrollableAncestorRects:Be,measuringScheduled:O,windowRect:qe}),[k,H,L,j,Se,De,Re,T,I,_,ie,ee,se,Be,O,qe]),ln=a.useMemo(()=>({activatorEvent:j,activators:Rt,active:k,activeNodeRect:L,ariaDescribedById:{draggable:Le},dispatch:x,draggableNodes:T,over:ie,measureDroppableContainers:ee}),[j,Rt,k,L,x,Le,T,ie,ee]);return N.createElement(jt.Provider,{value:S},N.createElement(He.Provider,{value:ln},N.createElement(Ft.Provider,{value:cn},N.createElement(Ke.Provider,{value:on},o))),N.createElement(Tn,{announcements:r,hiddenTextDescribedById:Le,screenReaderInstructions:u}));function an(){const A=(Z==null?void 0:Z.autoScrollEnabled)===!1,z=typeof n=="object"?n.enabled===!1:n===!1,W=!A&&!z;return typeof n=="object"?{...n,enabled:W}:{enabled:W}}}),Cr=a.createContext(null),Lt="button",Sr="Droppable";function Er({id:e,data:t,disabled:n=!1,attributes:r}){const o=Ne(Sr),{activators:s,activatorEvent:l,active:i,activeNodeRect:c,ariaDescribedById:u,draggableNodes:d,over:f}=a.useContext(He),{role:g=Lt,roleDescription:v="draggable",tabIndex:p=0}=r??{},b=(i==null?void 0:i.id)===e,w=a.useContext(b?Ke:Cr),[h,C]=ct(),m=ir(s,e),x=We(t);ne(()=>(d[e]={id:e,key:o,node:h,data:x},()=>{const D=d[e];D&&D.key===o&&delete d[e]}),[d,e]);const S=a.useMemo(()=>({role:g,tabIndex:p,"aria-pressed":b&&g===Lt?!0:void 0,"aria-roledescription":v,"aria-describedby":u.draggable}),[g,p,b,v,u.draggable]);return{active:i,activatorEvent:l,activeNodeRect:c,attributes:S,isDragging:b,listeners:n?void 0:m,node:h,over:f,setNodeRef:C,transform:w}}function Jt(){return a.useContext(Ft)}const Mr="Droppable",Tr={timeout:25};function vt({data:e,disabled:t=!1,id:n,resizeObserverConfig:r}){const o=Ne(Mr),{active:s,dispatch:l,over:i,measureDroppableContainers:c}=a.useContext(He),u=a.useRef(!1),d=a.useRef(null),f=a.useRef(null),{disabled:g,updateMeasurementsFor:v,timeout:p}={...Tr,...r},b=We(v??n),w=a.useCallback(()=>{if(!u.current){u.current=!0;return}f.current!=null&&clearTimeout(f.current),f.current=setTimeout(()=>{c(typeof b.current=="string"?[b.current]:b.current),f.current=null},p)},[p]),h=_t({onResize:w,disabled:g||!s}),C=a.useCallback((D,M)=>{h&&(M&&(h.unobserve(M),u.current=!1),D&&h.observe(D))},[h]),[m,x]=ct(C),S=We(e);return a.useEffect(()=>{!h||!m.current||(h.disconnect(),u.current=!1,h.observe(m.current))},[m,h]),ne(()=>(l({type:R.RegisterDroppable,element:{id:n,key:o,disabled:t,node:m,rect:d,data:S}}),()=>l({type:R.UnregisterDroppable,key:o,id:n})),[n]),a.useEffect(()=>{l({type:R.SetDroppableDisabled,id:n,key:o,disabled:t})},[t]),{active:s,rect:d,isOver:(i==null?void 0:i.id)===n,node:m,over:i,setNodeRef:x}}const Ir={duration:250,easing:"ease",dragSourceOpacity:0};function Or({animate:e,adjustScale:t,activeId:n,draggableNodes:r,duration:o,dragSourceOpacity:s,easing:l,node:i,transform:c}){const[u,d]=a.useState(!1);return ne(()=>{var f;if(!e||!n||!l||!o){e&&d(!0);return}const g=(f=r[n])==null?void 0:f.node.current;if(c&&i&&g&&g.parentNode!==null){const v=qt(i);if(v){const p=v.getBoundingClientRect(),b=ye(g),w={x:p.left-b.left,y:p.top-b.top};if(Math.abs(w.x)||Math.abs(w.y)){const h={scaleX:t?b.width*c.scaleX/p.width:1,scaleY:t?b.height*c.scaleY/p.height:1},C=ue.Transform.toString({x:c.x-w.x,y:c.y-w.y,...h}),m=g.style.opacity;s!=null&&(g.style.opacity=`${s}`);const x=i.animate([{transform:ue.Transform.toString(c)},{transform:C}],{easing:l,duration:o});x.onfinish=()=>{i.style.display="none",d(!0),g&&s!=null&&(g.style.opacity=m)};return}}}d(!0)},[e,n,t,r,o,l,s,i,c]),ne(()=>{u&&d(!1)},[u]),u}const Ar={x:0,y:0,scaleX:1,scaleY:1},Nr=e=>lt(e)?"transform 250ms ease":void 0,Lr=N.memo(({adjustScale:e=!1,children:t,dropAnimation:n=Ir,style:r,transition:o=Nr,modifiers:s,wrapperElement:l="div",className:i,zIndex:c=999})=>{var u,d;const{active:f,activeNodeRect:g,containerNodeRect:v,draggableNodes:p,activatorEvent:b,over:w,dragOverlay:h,scrollableAncestors:C,scrollableAncestorRects:m,windowRect:x}=Jt(),S=a.useContext(Ke),D=Gt(s,{activatorEvent:b,active:f,activeNodeRect:g,containerNodeRect:v,draggingNodeRect:h.rect,over:w,overlayNodeRect:h.rect,scrollableAncestors:C,scrollableAncestorRects:m,transform:S,windowRect:x}),M=f!==null,B=e?D:{...D,scaleX:1,scaleY:1},E=me(K=>M?K||(g?{...g}:null):null,[M,g]),T=E?{position:"fixed",width:E.width,height:E.height,top:E.top,left:E.left,zIndex:c,transform:ue.Transform.toString(B),touchAction:"none",transformOrigin:e&&b?On(b,E):void 0,transition:typeof o=="function"?o(b):o,...r}:void 0,$=M?{style:T,children:t,className:i,transform:B}:void 0,I=a.useRef($),re=$??I.current,{children:G,transform:k,...F}=re??{},Z=a.useRef((u=f==null?void 0:f.id)!=null?u:null),P=Or({animate:!!(n&&Z.current&&!f),adjustScale:e,activeId:Z.current,draggableNodes:p,duration:n==null?void 0:n.duration,easing:n==null?void 0:n.easing,dragSourceOpacity:n==null?void 0:n.dragSourceOpacity,node:h.nodeRef.current,transform:(d=I.current)==null?void 0:d.transform}),j=!!(G&&(t||n&&!P));return a.useEffect(()=>{if((f==null?void 0:f.id)!==Z.current){var K;Z.current=(K=f==null?void 0:f.id)!=null?K:null}f&&I.current!==$&&(I.current=$)},[f,$]),a.useEffect(()=>{P&&(I.current=void 0)},[P]),j?N.createElement(He.Provider,{value:Pt},N.createElement(Ke.Provider,{value:Ar},N.createElement(l,{...F,ref:h.setRef},G))):null});function pt(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function kr(e,t){return e.reduce((n,r,o)=>{const s=t.get(r);return s&&(n[o]=s),n},Array(e.length))}function ze(e){return e!==null&&e>=0}const Qt=({rects:e,activeIndex:t,overIndex:n,index:r})=>{const o=pt(e,n,t),s=e[r],l=o[r];return!l||!s?null:{x:l.left-s.left,y:l.top-s.top,scaleX:l.width/s.width,scaleY:l.height/s.height}},Zt="Sortable",en=N.createContext({activeIndex:-1,containerId:Zt,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Qt});function $r({children:e,id:t,items:n,strategy:r=Qt}){const{active:o,dragOverlay:s,droppableRects:l,over:i,measureDroppableContainers:c,measuringScheduled:u}=Jt(),d=Ne(Zt,t),f=s.rect!==null,g=a.useMemo(()=>n.map(x=>typeof x=="string"?x:x.id),[n]),v=o!=null,p=o?g.indexOf(o.id):-1,b=i?g.indexOf(i.id):-1,w=a.useRef(g),h=!Br(g,w.current),C=b!==-1&&p===-1||h;ne(()=>{h&&v&&!u&&c(g)},[h,g,v,c,u]),a.useEffect(()=>{w.current=g},[g]);const m=a.useMemo(()=>({activeIndex:p,containerId:d,disableTransforms:C,items:g,overIndex:b,useDragOverlay:f,sortedRects:kr(g,l),strategy:r}),[p,d,C,g,b,l,f,r]);return N.createElement(en.Provider,{value:m},e)}function Br(e,t){return e.join()===t.join()}const Pr=({id:e,items:t,activeIndex:n,overIndex:r})=>pt(t,n,r).indexOf(e),Fr=({containerId:e,isSorting:t,wasDragging:n,index:r,items:o,newIndex:s,previousItems:l,previousContainerId:i,transition:c})=>!c||!n||l!==o&&r===s?!1:t?!0:s!==r&&e===i,jr={duration:200,easing:"ease"},tn="transform",zr=ue.Transition.toString({property:tn,duration:0,easing:"linear"}),Wr={roleDescription:"sortable"};function Xr({disabled:e,index:t,node:n,rect:r}){const[o,s]=a.useState(null),l=a.useRef(t);return ne(()=>{if(!e&&t!==l.current&&n.current){const i=r.current;if(i){const c=at(n.current,{ignoreTransform:!0}),u={x:i.left-c.left,y:i.top-c.top,scaleX:i.width/c.width,scaleY:i.height/c.height};(u.x||u.y)&&s(u)}}t!==l.current&&(l.current=t)},[e,t,n,r]),a.useEffect(()=>{o&&requestAnimationFrame(()=>{s(null)})},[o]),o}function Yr({animateLayoutChanges:e=Fr,attributes:t,disabled:n,data:r,getNewIndex:o=Pr,id:s,strategy:l,resizeObserverConfig:i,transition:c=jr}){const{items:u,containerId:d,activeIndex:f,disableTransforms:g,sortedRects:v,overIndex:p,useDragOverlay:b,strategy:w}=a.useContext(en),h=u.indexOf(s),C=a.useMemo(()=>({sortable:{containerId:d,index:h,items:u},...r}),[d,r,h,u]),m=a.useMemo(()=>u.slice(u.indexOf(s)),[u,s]),{rect:x,node:S,isOver:D,setNodeRef:M}=vt({id:s,data:C,resizeObserverConfig:{updateMeasurementsFor:m,...i}}),{active:B,activatorEvent:E,activeNodeRect:T,attributes:$,setNodeRef:I,listeners:re,isDragging:G,over:k,transform:F}=Er({id:s,data:C,attributes:{...Wr,...t},disabled:n}),Z=dn(M,I),P=!!B,j=P&&!g&&ze(f)&&ze(p),K=!b&&G,oe=K&&j?F:null,ke=j?oe??(l??w)({rects:v,activeNodeRect:T,activeIndex:f,overIndex:p,index:h}):null,_=ze(f)&&ze(p)?o({id:s,items:u,activeIndex:f,overIndex:p}):h,ee=B==null?void 0:B.id,O=a.useRef({activeId:ee,items:u,newIndex:_,containerId:d}),H=u!==O.current.items,xe=e({active:B,containerId:d,isDragging:G,isSorting:P,id:s,index:h,items:u,newIndex:O.current.newIndex,previousItems:O.current.items,previousContainerId:O.current.containerId,transition:c,wasDragging:O.current.activeId!=null}),L=Xr({disabled:!xe,index:h,node:S,rect:x});return a.useEffect(()=>{P&&O.current.newIndex!==_&&(O.current.newIndex=_),d!==O.current.containerId&&(O.current.containerId=d),u!==O.current.items&&(O.current.items=u),ee!==O.current.activeId&&(O.current.activeId=ee)},[ee,P,_,d,u]),{active:B,activeIndex:f,attributes:$,rect:x,index:h,newIndex:_,items:u,isOver:D,isSorting:P,isDragging:G,listeners:re,node:S,overIndex:p,over:k,setNodeRef:Z,setDroppableNodeRef:M,setDraggableNodeRef:I,transform:L??ke,transition:De()};function De(){if(L||H&&O.current.newIndex===h)return zr;if(!(K&&!lt(E)||!c)&&(P||xe))return ue.Transition.toString({...c,property:tn})}}const Ur=[y.Down,y.Right,y.Up,y.Left],Kr=(e,{context:{active:t,droppableContainers:n,collisionRect:r,scrollableAncestors:o}})=>{if(Ur.includes(e.code)){if(e.preventDefault(),!t||!r)return;const s=[];n.getEnabled().forEach(c=>{if(!c||c!=null&&c.disabled)return;const u=c==null?void 0:c.rect.current;if(u)switch(e.code){case y.Down:r.top+r.height<=u.top&&s.push(c);break;case y.Up:r.top>=u.top+u.height&&s.push(c);break;case y.Left:r.left>=u.left+u.width&&s.push(c);break;case y.Right:r.left+r.width<=u.left&&s.push(c);break}});const l=Wt({active:t,collisionRect:r,droppableContainers:s,pointerCoordinates:null}),i=zt(l,"id");if(i!=null){const c=n.get(i),u=c==null?void 0:c.node.current,d=c==null?void 0:c.rect.current;if(u&&d){const v=ut(u).some((b,w)=>o[w]!==b)?{x:0,y:0}:{x:r.width-d.width,y:r.height-d.height};return{x:d.left-v.x,y:d.top-v.y}}}}},_r=({id:e,...t})=>{const{active:n,attributes:r,listeners:o,setNodeRef:s,transform:l,transition:i}=Yr({id:e});return V.jsx(kt,{id:e,innerProps:o,ref:s,rootProps:{...r,style:{visibility:e===(n==null?void 0:n.id)?"hidden":"visible",transform:l?`translate3d(${l.x?Math.round(l.x):0}px, ${l.y?Math.round(l.y):0}px, 0)`:"",transition:i}},...t})},Hr=({id:e})=>{const{setNodeRef:t}=vt({id:e}),[n]=ot();return V.jsx(et,{ref:t,sx:{position:"relative"},children:V.jsx(et,{sx:{width:"100%",height:n.settings.dashboard.size}})})},qr=({id:e})=>{const{setNodeRef:t}=vt({id:e});return V.jsx(et,{ref:t,sx:{position:"relative",width:"40px",height:"40px"}})},Gr=({id:e,setEditDialog:t,...n})=>{const[r,o]=ot();return V.jsx($r,{id:e,items:r.widgets[e].c,children:r.widgets[e].c.length>0?r.widgets[e].c.map((s,l)=>V.jsx(_r,{id:s,onEdit:()=>t(s),onDelete:()=>o(i=>{delete i.widgets[s],i.widgets[e].c.splice(l,1)}),onDuplicate:()=>o(i=>{const c=un();i.widgets[c]=i.widgets[s],i.widgets[e].c.splice(l+1,0,c)}),...n},s)):n.inToolbar?V.jsx(qr,{id:e}):V.jsx(Hr,{id:e})})},Jr=({children:e})=>{const[t,n]=ot(),[r,o]=a.useState(null),s=i=>{const c=["d","tl","tc","tr"];return c.includes(i)?i:c.find(u=>t.widgets[u].c.includes(i))},l=hr(It(gt,{activationConstraint:{distance:1}}),It(ft,{coordinateGetter:Kr}));return V.jsxs(Rr,{collisionDetection:Wt,onDragStart:i=>o(i.active.id),sensors:l,measuring:{droppable:{strategy:ve.Always}},onDragEnd:i=>{var c;if(o(null),(c=i.over)!=null&&c.id&&i.active.id!==i.over.id){const u=s(i.active.id),d=s(i.over.id);if(u===d){const f=t.widgets[u].c.indexOf(i.active.id),g=t.widgets[d].c.indexOf(i.over.id);n(v=>{v.widgets[d].c=pt(v.widgets[d].c,f,g)})}}},onDragOver:i=>{var c;if((c=i.over)!=null&&c.id&&i.active.id!==i.over.id){const u=s(i.active.id),d=s(i.over.id);if(u!==d&&(d!=="d"||i.active.id!=="m")){const f=t.widgets[u].c.indexOf(i.active.id),g=t.widgets[d].c.indexOf(i.over.id),p=i.over&&i.active.rect.current.translated&&i.active.rect.current.translated.top>i.over.rect.top+i.over.rect.height?1:0,b=g>=0?g+p:t.widgets[d].c.length+1;n(w=>{w.widgets[d].c.splice(b,0,w.widgets[u].c[f]),w.widgets[u].c.splice(w.widgets[u].c.indexOf(i.active.id),1)})}}},children:[e,V.jsx(Lr,{children:r&&V.jsx(kt,{editMode:!0,id:r,inToolbar:!t.widgets.d.c.includes(r)})})]})};export{Gr as SortableWidgetContainer,Jr as SortableWidgetContext};
